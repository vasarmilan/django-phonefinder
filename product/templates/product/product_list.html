{% load staticfiles %}
<meta id="jsvars"
      {% for key, value in jsvars.items %}
      data-{{key}}="{{value}}"
      {% endfor %}
      />
<div class="container">
    <div class="row">  
        {% if products %}
        {% for index, product, rating in products %}
        <div class="col-12 card mr-3 mb-3 rounded" style="overflow: hidden; border-width: 3px;">
            <div class="card-body">
                <div class="row justify-content-start">
                    <div class="col-2 col-lg-2 col-xl-2 text-center" style="margin:auto;">
                        <h4 style="font-weight: bold;">{{ index }}.</h4>
                        <em title="Relatív pontszám az első ajánlás százalékában">{{ rating }}%</em>
                    </div>
                    <div class="col-sm-5 col-md-5 col-lg-4 col-xl-4 text-center" style="display:block; margin:auto;">
                        <img src="{{product.image.url}}"
                             alt="{{product.name}}"
                             style="width: 100%; height:160px; object-fit: contain; padding-top: 10px; padding-bottom:10px;"
                             class="card-img"/>
                        <div> <em style="font-size:.8em;">
                                {% for line in product.description_lines %}
                                {{ line }}<br/>
                                {% endfor %}
                            </em>
                        </div>
                    </div>
                    <div class="col-sm-5 col-md-5 col-lg-6 col-xl-6">
                        <div>
                            <h3 class="card-title mt-auto" style="letter-spacing: .1em; text-transform: uppercase;">
                                {{product.name}}</h3>
                            <p class="card-subtitle mt-auto mb-1" style="font-weight: bold;"><em>{{product.price}} Ft </em></p>
                        </div>
                        <div class="row">
                                    {% for rating in product.active_ratings %}
                                    <div class="col-sm-6">
                                        {{rating.criterion}}:
                                    </div>
                                    <div class="col-sm-6" style="margin: auto;">
                                        <div class="rating-container" title="{{rating.rating}}/10">
                                            {% for o in rating.rating_bar %}
                                            <div class="bar-5"></div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    {% endfor %}
                            <!-- <div class="col&#45;sm&#45;3"> -->
                            <!--     <ul> -->
                            <!--         {% for attr in product.active_attributes %} -->
                            <!--         <li>{{attr.attribute}}: {{attr.value_display}}</li> -->
                            <!--         {% endfor %} -->
                            <!--     </ul> -->
                            <!-- </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        Nincs elegendő információ
        {% endif %}
    </div>
</div>
